<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% include "partials/resources.html" %}
    <link rel="icon" href="{% static 'img/logo_betech.png' %}">
    <link rel="stylesheet" href="{% static 'styles/styles.css' %}">
    <link rel="stylesheet" href="{% static 'styles/styles-patrones-corte.css' %}">
    <title>SPP - Planificador Líneas</title>
</head>
<body>
    {% include "partials/header.html" %}
    <div class="filter-section">
        <form class="filter-form show-filter">
            <button type="button" class="filter-button">Mostrar filtro</button>
            <div class="filter-form-fields">
                <div class="filter-field">
                    <label for="filter-codigo">Código del patrón:</label>
                    <input type="text" name="filter-codigo" class="filter-input" placeholder="Ingrese el código">
                </div>
                <label for="advanced-search">Búsqueda avanzada:</label>
                <input type="checkbox" id="advanced-search" name="advanced-search">
                <div id="advanced-search-options" style="display: none;">
                    <div class="filter-field">
                        <label for="filter-nombre">Nombre del patrón:</label>
                        <input type="text" name="filter-nombre" class="filter-input" placeholder="Ingrese el nombre">
                    </div>
                    <div class="filter-field">
                        <label for="filter-producto">Producto asociado:</label>
                        <input type="text" name="filter-producto" class="filter-input" placeholder="Ingrese el producto">
                    </div>
                    <div class="filter-field">
                        <label for="filter-clase">Clase diamétrica rollizo:</label>
                        <select name="filter-clase" class="filter-select">
                            <option value="">Todas</option>
                            <option value="1">Clase 1</option>
                            <option value="2">Clase 2</option>
                            <option value="3">Clase 3</option>
                            <option value="4">Clase 4</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="filter-button">Buscar</button>
                <button type="button" class="clear-filter-button">Cancelar</button>
            </div>
        </form>
    </div>
    <div class="table-container">
        <div class="table-responsive">
            <table class="table w-100">
                <h1 class="encabezado-pedidos">Patrones de corte</h1>
                <thead class="thead-pedidos">
                    <tr>
                        <th>Código del patrón</th>
                        <th>Nombre del patrón</th>
                        <th>Producto asociado</th>
                        <th>Clase diamétrica rollizo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>01</td>
                        <td>corte1</td>
                        <td>producto1</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>02</td>
                        <td>corte12</td>
                        <td>producto2</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>03</td>
                        <td>corte3</td>
                        <td>producto3</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>04</td>
                        <td>corte4</td>
                        <td>producto4</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>05</td>
                        <td>corte5</td>
                        <td>producto5</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>06</td>
                        <td>corte6</td>
                        <td>producto6</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>07</td>
                        <td>corte7</td>
                        <td>producto7</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>08</td>
                        <td>corte8</td>
                        <td>producto8</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>09</td>
                        <td>corte9</td>
                        <td>producto9</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>corte10</td>
                        <td>producto10</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>corte11</td>
                        <td>producto11</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td>corte12</td>
                        <td>producto12</td>
                        <td>3</td>
                    </tr><tr>
                        <td>13</td>
                        <td>corte13</td>
                        <td>producto13</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>14</td>
                        <td>corte14</td>
                        <td>producto14</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>15</td>
                        <td>corte15</td>
                        <td>producto15</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>16</td>
                        <td>corte16</td>
                        <td>producto16</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>17</td>
                        <td>corte17</td>
                        <td>producto17</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>18</td>
                        <td>corte18</td>
                        <td>producto18</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>19</td>
                        <td>corte19</td>
                        <td>producto19</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>20</td>
                        <td>corte20</td>
                        <td>producto20</td>
                        <td>3</td>
                    </tr>
                </tbody>
            </table>
            <p class="no-data-message">No se encontraron datos.</p>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $(".filter-button").click(function() {
                $(".filter-form-fields").toggle();
                $(".filter-button").toggleClass("show-filter");
            });
            
            $("#advanced-search").change(function() {
                if ($(this).is(":checked")) {
                    $("#advanced-search-options").show();
                } else {
                    $("#advanced-search-options").hide();
                }
            });
            
            $(".filter-form").submit(function(e) {
                e.preventDefault();
                applyFilter();
            });
            
            $(".clear-filter-button").click(function() {
                $(".filter-form")[0].reset();
                applyFilter();
            });
            
            function applyFilter() {
                var filterCodigo = $(".filter-input[name='filter-codigo']").val().toLowerCase();
                var filterNombre = $(".filter-input[name='filter-nombre']").val().toLowerCase();
                var filterProducto = $(".filter-input[name='filter-producto']").val().toLowerCase();
                var filterClase = $(".filter-select[name='filter-clase']").val().toLowerCase();
                
                $(".table tbody tr").hide().each(function() {
                    var rowDataCodigo = $(this).find("td:nth-child(1)").text().toLowerCase();
                    var rowDataNombre = $(this).find("td:nth-child(2)").text().toLowerCase();
                    var rowDataProducto = $(this).find("td:nth-child(3)").text().toLowerCase();
                    var rowDataClase = $(this).find("td:nth-child(4)").text().toLowerCase();
                    
                    var matchesCodigo = filterCodigo === '' || rowDataCodigo === filterCodigo;
                    var matchesNombre = filterNombre === '' || rowDataNombre.includes(filterNombre);
                    var matchesProducto = filterProducto === '' || rowDataProducto.includes(filterProducto);
                    var matchesClase = filterClase === '' || rowDataClase === filterClase;
                    
                    if (matchesCodigo && matchesNombre && matchesProducto && matchesClase) {
                        $(this).show();
                    }
                });
                
                if ($(".table tbody tr:visible").length === 0) {
                    $(".no-data-message").show();
                } else {
                    $(".no-data-message").hide();
                }
            }
        });
    </script>
</body>
</html>